import _ from 'lodash';

const bindProps = [
  'onChange',
  'value',
  'checked',
];

function eventToValue(onChange) {
  return event => onChange(_.get(event, 'target.value', _.get(event, 'target.checked')));
}

export default function twoWay(props) {
  const nextProps = props;
  if (nextProps.onChange) {
    nextProps.onChange = eventToValue(props.onChange);
  }
  return _.pick(nextProps, bindProps);
}
