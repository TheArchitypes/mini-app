#!/bin/bash -ue

echo "Commencing build..."

npm run lint
if [ $? -eq 1 ];
then
    echo "There are linting errors. Failing build..."
    exit 1
fi

npm run build
if [ $? -eq 1 ];
then
    echo "There are build errors. Failing build..."
    exit 1
fi

case $TRAVIS_BRANCH in
    develop)
        ;;
    master)
        npm run build-storybook
        if [ $? -eq 1 ];
        then
            echo "The storybook build failed."
            exit 1
        fi
        ;;
    *)
    ;;
esac
