language: node_js
node_js:
- '7'
cache:
  directories:
  - node_modules
before_install:
- npm install -g eslint
- printf "registry=http://npmrepo.ifactorenergy.com:3000/\n//npmrepo.ifactorenergy.com:3000/:_authToken=\${NPM_TOKEN}"
  > .npmrc
install:
- npm install
script:
- bash build.sh
notifications:
  email: false
deploy:
  - provider: s3
    access_key_id: AKIAJODBZPBEXIRDF56A
    secret_access_key:
      secure: s54UdxBY6xlzBD9awHsrlrSBB3EQTftRcLHmSQ9whLB6MA5zQwHp2v6fF3MAe1nY4j0wEXvX/wtnxetkkcZeTZ86/a4wJf/IDbHhSWFQE1F2V16DCP70WOKOhdUOC0tSnk14uMAv4UYk/3qaaNhK2QQY4/zmOqKzDjkBEfKS0qCkwBEImWbuoZHjtZia4zB7DdYMnSeXxaAqd9DhK6L6wXSbHhnEX4sRGU5zdtaoUJwOL6h1i28/xtYoaxqePa3r4NP98SQPXEInp4nNb0a2B4Fk1qsC94vw+YAiGklBZ8a+OsDDRkSijTi7/CG822vrMcXt1o/UlIwIwcaJqHQu6Bty9UItPpmmlp1OZW59p2Am5jx/lDZNDVX+lH5EF8BqggWHcDyv0lrbi9DQB871MPQJPoW+kUYOeqezAbSTI5SxKqGiM/ru3wyC67fIGTPXWYQHXJjF+HjdDHs1+G01LtZ9mjyKjHzYcfl4M93xxn8OUYY6/gM7WW62SZFOW/9FQJifvyN7hZ1XmD6NUAkC1zgmBmeWtgGFDx0KSrqgV+P+oUS0e2B7tGzhEjx41L0SpI0mCGYLxmx3r2/lN6vh7XqUSuXLFHQryn0Y0OiHKrkfJg+l1CBFGhnqYqMjbt7c5gv/4/JYbVkZdknadZIetZpnx5EmUWeDNMTL5XAD+gE=
    bucket: kubra-lib-ux-components
    local-dir: storybook-static
    skip_cleanup: true
    on:
      repo: iFactor/kubra-lib-ux-components
      branch: master
  - provider: npm
    email: npm@kubra.com
    api_key: $NPM_TOKEN
    skip_cleanup: true
    on:
      tags: true
      repo: iFactor/kubra-lib-ux-components
