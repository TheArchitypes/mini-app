# kubra-lib-ux-components

This project contains all the reusable components for React-based production
development to be shared between projects to maintain common functionality and accelerate productivity.

We feature a styleguide page in this project to demo and document the components that may be used.

## Hosted Styleguide

http://kubra-lib-ux-components.s3-website-us-east-1.amazonaws.com/

## Changelog

**v1.15.8**
- Add ConfirmDelete Component
- Correct styling for TextField
- Correct styling for h2 and h3 headers
- Add ID to Stripe component

**v1.15.7**
- ToggleButton bug fix

**v1.15.6**
- Made MenuItem ID prefix required to force uniqueness
- Added ID to DropdownSearch
- Added ID prefix to MultiSelect component for uniqueness

**v1.15.5**
- Added IDs to ToggleButton, MultiSelectField, and corrected Breadcrumbs ID

**v1.15.4**
- TextArea Component - Add max char to label and fix styling
- Added IDs to Breadcrumbs, Pagination, Slider, MenuItem

**v1.15.3**
- Add TextArea component

**v1.15.2**
- Add id prop for testing, accordion component - expandId will place and ID on the expand toggle
- Accordion Component - add prop to disable the click on the row and only open when click on icon
- Select Component - Add cursor pointer to styles to remove text cursor

**v1.15.1**
- class name fixes to prevent clear button from getting unwanted css
- contained new custom li within <a> tag

**v1.15.0**
- added SelectFieldCustomInput component
- component allows user to input a custom value as a select option instead of the prepopulated ones
- custom value will be saved into state when apply is clicked
- clear will clear out the current input value but leave state untouched until apply is clicked
- uses same props and child structure as SelectField component

**v1.14.1**
- Added maxLength and disableMaxLengthLabel properties to TextField.
- Updated TextField label with the max length value if disableMaxLengthLabel is false.

**v1.14.0**
- New Multiselect field with search filter.

**v1.13.3**
- Added CSS for changing cursor to default when checkbox is disabled
- Added htmlProps and className to Stripe

**v1.13.2**
- Added support for passing in Router 4 Link classes to Nav components

**v1.4.1**
- Added TopBar
- Added TopBarItem
- CSS Antialiasing
- Moved Navigation to molecules with deprecation warning

**v1.3.0**
- Switched to box-sizing: border-box
- Added icon prop to ButtonPrimary, Secondary, Tertiary for icon based buttons
- Fixed the SelectField menu item width issue
- Fixed Navbar width issue
- Iconic Fonts/CSS
- IconButton component

## Install

Make sure you have set your npm to point at the Kubra NPM registry:

```
npm config set registry http://npmrepo.ifactorenergy.com:3000
```

Then do:

```
npm install --save kubra-lib-ux-components
```

Then you may import components like so:

```javascript
import { RaisedButton } from 'kubra-lib-ux-components/dist/atoms/buttons';
```

To import the stylesheets either add an import for SCSS like so to your stylesheet:

```scss
@import "~kubra-lib-ux-components/dist/sass/index.scss";
```

Or import it via Javascript ES6 import in your App.js file:

```javascript
import 'kubra-lib-ux-components/dist/sass/index.scss';
```

**Note** You will need to download and place the [Roboto fonts](https://github.com/iFactor/kubra-lib-ux-components/tree/develop/src/assets) in an assets folder above the directory where your
root scss stylesheet is located. There will be errors if this isn\'t done.

For example:

If your stylesheet is at this path in your project:

```
src/sass/index.scss
```

Your assets folder should be located:

```
src/assets/
```

## Launching Styleguide

Clone this project and

```
npm install
```

```
npm start
```

Open [http://localhost:6006](http://localhost:6006).

## Adding Components

We structure our component library using Brad Frost's Atomic Design
methodology. We break simple to complex reusable components down into the following:

* Atoms
* Molecules
* Organisms

Atoms function as individual UX components that are stateless such as Text input fields, buttons, icons, typography blocks.

Molecules are a grouping of atoms that are made up of the atomic UX pieces.

Organisms are on the widget level such as full navigation bars, modals, and other compount UX elements that have state and complex functionality.

Please read Brad Frost's [Atomic Design Chapter](http://atomicdesign.bradfrost.com/chapter-2/)

Once you add components to the `src/` folder in either atoms, molecules or organisms folders,
you need to document your component using [React Storybook](https://storybook.js.org/). You may access the Storybook definitions in `stories/index.js`;

Here are the different [commands](https://storybook.js.org/basics/slow-start-guide/#write-your-stories) you may use to add documentation of Storybook UX states for your components.

## Releasing New Version

New versions must be documented, reviewed, and merged to master before a release is made. Releases should be made from master only.

The release process:
1. Create a new branch labeled as a release of the new version, ex. `release-1.14.1`.
2. Update the project version in `package.json`.
3. Add a descriptive list to the changelog in the README. For example:
    ```
    **v1.14.1**
    - Added maxLength and disableMaxLengthLabel properties to TextField.
    - Updated TextField label with the max length value if disableMaxLengthLabel is false.
    ```
4. Create a PR to develop from the release branch. Add reviewers as with any code PR. Merge after tests complete and when approved.
    - If tight on time, merge without approval. Never merge before Travis completes its checks.
5. After merging to develop, create a PR from the release branch to master titled with the new version number. Wait for Travis to complete, then merge.
6. In the Releases tab, draft a new release from master. The tag version must be in the form `vX.X.X`, following semantic versioning standards. The release title should be the same as the tag. The description should match the changelog, including any additional notes related to the release.

For reference: http://nvie.com/posts/a-successful-git-branching-model/

![Git Branching Strategy](http://nvie.com/img/git-model@2x.png)

## Co-Developing a Product with the UX Component Library

In order to add new components as you work on an ongoing Product or Implementation, you may add components to the component library, locally and have the product project receive your changes as you
build more UX Components. You may clone this repo and run the following steps in kubra-lib-ux-components folder:

```
npm install
```

Add your components to the `src/` folder and update `stories/index.js` with annotations.

Then:

```
npm run build
```

Which, compiles the components for importing into a project

Next, switch to your React Project and run the following:

```
npm install ../kubra-lib-ux-components
```

This locally installs the component library in your project if the project is located in the same parent folder.

## Importing Fonts

Fonts cannot be imported by including index.scss within a class.  
To import fonts, either:

1. Include `@import "~kubra-lib-ux-components/dist/sass/fonts"` at the top of your project's base stylesheet. This includes typography and icon fonts.
OR
2. Import the entire stylesheet (`@import "~kubra-lib-ux-components/dist/sass/index.scss"`) at the top level of your project's base stylesheet. This is the intended way for most projects.

## Environment

**Static Website**

**Production**
* URL: http://kubra-lib-ux-components.s3-website-us-east-1.amazonaws.com/
* Account: iFactor Projects
* S3 Bucket: kubra-lib-ux-components
* S3 User: kubra-lib-ux-components
* Deploys static site on master branch change

**Test**
* URL: http://kubra-lib-ux-components-test.s3-website-us-east-1.amazonaws.com/
* Account: iFactor Projects
* S3 Bucket: kubra-lib-ux-components-test
* S3 User: kubra-lib-ux-components
* Deploys manually with `npm run deploy-to-test`
    * Requires AWS CLI Installed
    * Requires an AWS Profile named kubra-lib-ux-components using kubra-lib-ux-components user credentials

**NPM Package**
* Registry URL: http://npmrepo.ifactorenergy.com:3000
* Package Name: kubra-lib-ux-components
* Deploys on Git Release version tag with format vX.X.X and package.json version with format vX.X.X

## Important Notes

### Projects Using react-router v4 (React Router 4)

This repository was built using react-router v3, which has a different Link class than what is used in react-router v4. Some components will not render correctly and may throw this error:

> Warning: React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in.

For these components, the react-router v4 <Link> class must be passed to the component through props. A conditional statement can render the component with the <Link> from props instead of the default router v3 <Link>.

Check the Navigation molecule for an example of overriding the <Link> class.
